(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{198:function(e,t,r){},222:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(0),c=r.n(n),o=r(17),i=r.n(o),s=(r(198),r(7)),l=r(50),d=r(27),u=r(28),j=r(108),b=r.n(j),h=r(109),p=r.n(h),g=r(111),f=r.n(g),O=r(112),x=r.n(O),m=r(151),y=r(75),v=r(264),w=r(110),k=r.n(w),C=r(265),S=r(166),A=r(80),R=r(227),E=r(228),I=r(8),D=r(10),_=r.n(D),T=r(20),N=r(19),B=r.n(N),L="SET_LOADING",z="SET_ALERT",U="CLEAR_ALERT",P="LOG_IN_CALLBACK",M="LOG_OUT",W="LOG_IN_STATUS",F="GET_USERS",q="UPDATE_USER",G="GET_DELIVERY_STATUS",V="CREATE_CARDGROUP",H="CREATE_CARDGROUP_ERROR",Y="LOAD_CARDGROUPS",J="LOAD_CARDGROUP",K="DELETE_CARDGROUP",Q="DELETE_CARDGROUP_ERROR",X="CREATE_CARD",Z="CREATE_CARD_ERROR",$="LOAD_CARD",ee="LOAD_CARDS",te="DELETE_CARD",re="DELETE_CARD_ERROR",ae="CREATE_RATING",ne=r(6),ce=r(278),oe="750px",ie=(Object(l.a)((function(e){return{pageWrapper:{marginLeft:"100px",marginRight:"200px"}}})),Object(ne.a)({root:{marginLeft:"auto",marginRight:"auto",maxWidth:oe,minWidth:oe,marginTop:"50px"}})(ce.a)),se=Object(ne.a)({root:{marginLeft:"auto",marginRight:"auto",maxWidth:oe,minWidth:oe}})(ce.a),le=Object(l.a)((function(e){return{link:{color:"inherit",textDecoration:"none"},navlink:{color:"white",whiteSpace:"nowrap"},navbar:{backgroundColor:e.palette.primary.main,color:"white",textColor:"white"}}})),de=function(e){var t=le(),r=Object(I.c)((function(e){return e.authReducer.loggedInUser})),n=c.a.useState(null),o=Object(s.a)(n,2),i=o[0],l=o[1],j=Object(d.g)(),h=Object(I.b)(),g=function(){l(null)};return r.username?Object(a.jsxs)("div",{children:[Object(a.jsxs)(A.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},children:[Object(a.jsx)(b.a,{}),Object(a.jsx)("div",{style:{marginLeft:"5px"},children:r.username}),Object(a.jsx)(p.a,{})]}),Object(a.jsxs)(m.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:g,children:[Object(a.jsx)(u.b,{to:"/userprofile/"+r.username,className:t.link,children:Object(a.jsxs)(y.a,{onClick:g,children:[Object(a.jsx)(k.a,{})," My Profile"]})}),Object(a.jsxs)(y.a,{onClick:function(){e.setDarkMode()},children:[Object(a.jsx)(f.a,{}),"Toggle Dark Mode"]}),Object(a.jsxs)(y.a,{onClick:function(){console.log("out"),h(function(){var e=Object(T.a)(_.a.mark((function e(t,r){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("user_token")&&(a=localStorage.getItem("user_token"),B.a.post("/api/logout/access",{},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){e.data.error?console.error(e.data.error):localStorage.removeItem("user_token")}))),localStorage.getItem("refresh_token")&&(n=localStorage.getItem("refresh_token"),B.a.post("/api/logout/refresh",{},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(e.data.error)throw new Error(e.data.error);localStorage.removeItem("refresh_token")}))),localStorage.clear(),console.log("logging out..."),t({type:M,payload:{loggedIn:!1,loggedInUser:{}}});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),g(),j.push("/"),window.location.reload()},children:[Object(a.jsx)(x.a,{})," Logout"]})]})]}):Object(a.jsx)(u.c,{className:t.navlink,to:"/",children:" Log in"})},ue=function(e){var t=le(),r=Object(I.c)((function(e){return e.authReducer.loggedIn})),n=Object(I.c)((function(e){return e.authReducer.isAdmin}));return Object(a.jsx)(v.a,{position:"static",style:{},children:Object(a.jsx)(se,{className:t.navbar,children:Object(a.jsxs)(C.a,{style:{padding:0},children:[Object(a.jsx)(u.b,{to:"/",className:t.link,children:Object(a.jsx)(S.a,{variant:"h6",style:{flexGrow:0},onClick:function(){return console.log("asdsad")},children:"TTK4145 Flashcards"})}),Object(a.jsx)(R.a,{style:{textColor:"white",display:"flex",marginLeft:"auto"},children:r?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(E.a,{children:Object(a.jsx)(u.c,{className:t.navlink,to:"/",children:" Add Cards"})}),Object(a.jsx)(E.a,{children:Object(a.jsx)(u.c,{className:t.navlink,to:"/peerreview",children:" Peer Review"})}),Object(a.jsx)(E.a,{children:Object(a.jsx)(u.c,{className:t.navlink,to:"/study",children:" Study "})}),n?Object(a.jsx)(E.a,{children:Object(a.jsx)(u.c,{className:t.navlink,to:"/adminpage",children:" Admin Page"})}):Object(a.jsx)("div",{})]}):Object(a.jsx)("div",{})}),Object(a.jsx)(de,{setDarkMode:e.setDarkMode})]})})})},je=r(266),be=r(267),he=r(268),pe={loading:!1},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return console.log("laading",t),{loading:t.payload};default:return console.log("default alert"),e}},fe=r(229),Oe=Object(l.a)((function(e){return{loader:{textAlign:"center"}}})),xe=function(e){var t=Oe(),r=Object(I.c)((function(e){return e.loadingReducer.loading}));return Object(a.jsx)("div",{style:e.style,className:t.loader,children:r?Object(a.jsx)(fe.a,{size:e.size?e.size:40,color:e.color?e.color:"secondary"}):e.alternative?e.alternative:Object(a.jsx)("div",{})})},me=function(e){var t=e.cardgroups,r=e.showDueDate,n=e.onClick,c=Object(I.c)((function(e){return e.loadingReducer.loading})),o=function(e){console.log("ddatee"),console.log(e);try{var t=new Date(e.year,e.month-1,e.date,e.hour,e.minute);return console.log("aa",t),t.toString()}catch(r){return"Date error"}};return c?Object(a.jsx)(xe,{}):Object(a.jsxs)("div",{children:[Object(a.jsx)(je.a,{}),Object(a.jsxs)(be.a,{container:!0,spacing:0,children:[Object(a.jsx)(je.a,{}),t.length?t.map((function(e){return Object(a.jsxs)(be.a,{item:!0,xs:12,children:[Object(a.jsx)(he.a,{onClick:function(){return n(e.id)},style:{padding:"10px",minHeight:"100px"},children:Object(a.jsx)(be.a,{container:!0,spacing:2,children:Object(a.jsxs)(be.a,{item:!0,xs:12,children:[Object(a.jsx)(S.a,{variant:"subtitle1",component:"h2",children:e.title}),r?Object(a.jsxs)(S.a,{variant:"body2",color:"textSecondary",component:"h2",children:[e.numberOfCardsDue," cards are due: ",o.call(undefined,e.dueDate)]}):Object(a.jsx)("div",{})]})})}),Object(a.jsx)(je.a,{})]},e.id)})):Object(a.jsx)(S.a,{variant:"subtitle1",children:" No groups"})]})]})},ye=function(){return function(){var e=Object(T.a)(_.a.mark((function e(t,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:L,payload:!0}),e.next=3,B.a.get("/api/cardgroups").then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log("mah cardgroups"),console.log(r),t({type:Y,payload:r})})).catch((function(e){return console.log(e)}));case 3:t({type:L,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:L,payload:!0}),t.next=3,B.a.get("/api/cardgroup/"+e).then((function(e){if(console.log("res,",e),e.data.error)throw console.log("error"),new Error(e.data.error);var t=[e.data];console.log("cardgroup found"),console.log(t),r({type:J,payload:t})})).catch((function(e){var t={severity:"error",text:e.toString()};r({type:z,payload:t})}));case 3:r({type:L,payload:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},we=r(280),ke=r(170),Ce=r(160),Se=r(33),Ae=r(277),Re=function(e){var t=e.onClose,r=e.selectedValue,n=e.open;return Object(a.jsx)(we.a,{onClose:function(){t(r)},"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsx)("div",{children:"Are you sure??"})})},Ee=Object(l.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),Ie=function(e){var t=e.onClose,r=e.selectedValue,o=e.open,i=Object(I.b)(),l=c.a.useState(null),d=Object(s.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),p=h[0],g=h[1],f=Object(n.useState)(0),O=Object(s.a)(f,2),x=O[0],m=O[1],y=Object(n.useState)("23:59"),v=Object(s.a)(y,2),w=v[0],k=v[1],C=Object(I.c)((function(e){return e.alertReducer.severity})),R=Object(I.c)((function(e){return e.alertReducer.newAlert})),E=Ee();Object(n.useEffect)((function(){console.log("stformSubmitCallback"),"success"===C&&D()}),[R]);var D=function(){j(null),g(""),m(0),k("23:59"),t(r)};return Object(a.jsxs)(we.a,{onClose:D,className:E.dialog,open:o,style:{margin:"100px"},children:[Object(a.jsx)(Re,{}),Object(a.jsxs)("div",{style:{margin:"40px 40px"},children:[Object(a.jsx)(be.a,{container:!0,spacing:2,children:Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h6",align:"left",children:"New Cardgroup"})})}),Object(a.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),p&&u&&x&&w){console.log(u);var t=u.getFullYear(),r=u.getMonth()+1,a=u.getDate(),n=w.split(":")[0],c=w.split(":")[1];i((o={title:p,dueDate:{year:t,month:r,date:a,hour:n,minute:c,second:59},numberOfCardsDue:x},function(){var e=Object(T.a)(_.a.mark((function e(t,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("c cardgroup"),console.log(o),B.a.post("/api/addcardgroup",{title:o.title,numberOfCardsDue:o.numberOfCardsDue,dueDate:o.dueDate},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(e.data.error)throw new Error(e.data.error);if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log(r.dueDate),console.log("was created, ",r);var a={severity:"success",text:"successfully created cardgroup: "+r.title};t({type:z,payload:a}),t({type:V,payload:r})})).catch((function(e){console.log("This is an error yes plz");var r={severity:"error",text:e.toString()};t({type:z,payload:r})})),console.log("async call up in hier",o);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()))}var o},children:Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsx)(be.a,{item:!0,xs:12}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{color:"secondary",onChange:function(e){return g(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",label:"Cardgroup title"})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{fullWidth:!0,color:"secondary",id:"outlined-number",label:"Number of flashcards for delivery pr student",type:"number",required:!0,onChange:function(e){return m(e.target.value)},variant:"outlined"})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(Se.a,{utils:Ce.a,children:Object(a.jsx)(Ae.a,{fullWidth:!0,disableToolbar:!0,required:!0,inputVariant:"outlined",variant:"outlined",format:"MM/dd/yyyy",id:"date-picker-inline",label:"Due date for delivery",value:u,onChange:function(e){j(e)},onClick:console.log("close"),color:"secondary",autoOk:!0,animateYearScrolling:!0,KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(ke.a,{fullWidth:!0,id:"time",label:"",type:"time",variant:"outlined",onChange:function(e){return k(e.target.value)},defaultValue:"23:59",color:"secondary",InputLabelProps:{shrink:!0}})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{variant:"contained",onClick:D,fullWidth:!0,color:"primary",children:" Back"})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:u&&p&&x?"green":"grey",color:"white"},children:"Submit"})})]})})]})]})},De=r(12),_e={loggedIn:!1,loggedInUser:{},isAdmin:!1},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return console.log("successfull login callback"),Object(De.a)(Object(De.a)({},e),{},{loggedIn:t.payload.loggedIn,isAdmin:t.payload.isAdmin});case M:return console.log("logging out"),console.log(t.payload),Object(De.a)(Object(De.a)({},e),{},{loggedIn:t.payload.loggedIn,loggedInUser:t.payload.loggedInUser});case W:return console.log("fetching status"),console.log(t.payload),Object(De.a)(Object(De.a)({},e),{},{loggedIn:t.payload.loggedIn,loggedInUser:t.payload.loggedInUser,isAdmin:t.payload.isAdmin});default:return console.log("default auth"),e}},Ne=Object(l.a)((function(e){return{addButton:{backgroundColor:e.palette.button.success.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.success.dark}}}})),Be=function(){var e=Ne(),t=Object(I.b)(),r=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups})),o=Object(I.c)((function(e){return e.authReducer.isAdmin}));Object(n.useEffect)((function(){t(ye())}),[t]),Object(n.useEffect)((function(){console.log("cardgroups changed...")}),[r]);var i=c.a.useState(!1),l=Object(s.a)(i,2),u=l[0],j=l[1],b=Object(d.g)();return Object(a.jsxs)(ie,{children:[Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsxs)(be.a,{item:!0,xs:8,children:[Object(a.jsx)(S.a,{variant:"h4",gutterBottom:!0,children:"Add Cards"}),Object(a.jsx)(S.a,{variant:"body2",color:"textSecondary",children:"Each cardgroup has a set number of cards to submit and a duedate."})]}),Object(a.jsx)(be.a,{item:!0,xs:4,children:o?Object(a.jsx)(A.a,{fullWidth:!0,className:e.addButton,variant:"outlined",onClick:function(){j(!0)},children:"+ Create group"}):Object(a.jsx)("div",{})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(me,{cardgroups:r,showDueDate:!0,onClick:function(e){b.push("/cardgroup/"+e)}})})]}),Object(a.jsx)(Ie,{open:u,onClose:function(e){j(!1)}})]})},Le=r(271),ze=r(91),Ue=r(152),Pe=r.n(Ue),Me=Object(ze.a)(Le.a)({color:"black",padding:"20px"}),We=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),r=t[0],c=t[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),l=i[0],u=i[1],j=Object(n.useState)(""),b=Object(s.a)(j,2),h=b[0],p=b[1],g=Object(I.b)(),f=Object(n.useState)(!1),O=Object(s.a)(f,2),x=O[0],m=O[1];return x?Object(a.jsx)(d.a,{to:{pathname:"/loginfunc"}}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{marginBottom:0,marginTop:"50px"},children:Object(a.jsx)("h3",{style:{fontSize:"14px",color:"#666",display:"inline",padding:"12px"},children:"ALTERNATIVE LOGIN - JUST FOR TESTING"})}),Object(a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),r&&l&&h){var t={username:r,email:l,name:h};fetch("/api/userdata",{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),"success"!==e.status)throw e.error;console.log("redirecting"),m(!0)})).catch((function(e){g({type:z,payload:{severity:"error",text:e}})}))}else g({type:z,payload:{severity:"error",text:"Missing credentials for login"}})},children:[Object(a.jsx)(ke.a,{label:"username",onChange:function(e){return c(e.target.value)},required:!0}),"  ",Object(a.jsx)("br",{}),Object(a.jsx)(ke.a,{label:"name",onChange:function(e){return p(e.target.value)},required:!0})," ",Object(a.jsx)("br",{}),Object(a.jsx)(ke.a,{label:"email",onChange:function(e){return u(e.target.value)},required:!0})," ",Object(a.jsx)("br",{}),Object(a.jsx)(A.a,{variant:"contained",style:{margin:"30px"},type:"submit",children:"Manual Login (for testing)"})]})]})};var Fe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],c=t[1],o=Object(I.b)(),i=!1;return Object(a.jsxs)(ie,{style:{textAlign:"center",marginTop:"15%"},children:[Object(a.jsxs)(A.a,{color:"primary",variant:"contained",onClick:function(){i=!i,o({type:L,payload:{loading:!0}}),B.a.get("/api/logintoken",{withCredentials:!0}).then((function(e){window.open(e.data.url,"_self")})).catch((function(e){console.log("err",e);o({type:z,payload:{severity:"error",text:"External login failed"}})})),o({type:"CLEAR_LOADING",payload:{loading:!0}})},style:{width:"300px",height:"80px"},children:["Log in with Feide",Object(a.jsx)(xe,{style:{marginLeft:"10px",height:"26px"},size:24,alternative:Object(a.jsx)(Pe.a,{})})]})," ",Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{padding:"10px"},children:[Object(a.jsx)(Me,{href:"#",onClick:function(e){return c(!r)},children:"Alternative login"}),Object(a.jsx)(Me,{target:"_blank",href:"https://s.ntnu.no/glemt",children:"Forgot Password"})]}),r?Object(a.jsx)(We,{}):Object(a.jsx)("div",{children:" "})]})},qe={users:[],status:[]},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return console.log("successfull get users"),Object(De.a)(Object(De.a)({},e),{},{users:t.payload});case G:return console.log("successfull get status"),Object(De.a)(Object(De.a)({},e),{},{status:t.payload});case q:return console.log("updated user"),Object(De.a)(Object(De.a)({},e),{},{users:e.users.map((function(e){return e.id==t.payload.id?t.payload:e}))});default:return console.log("default auth"),e}},Ve=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.a.get("/api/users/role="+e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(t){if(t.data.error)throw new Error(t.data.error);console.log("res data role ="+e,t.data),r({type:F,payload:t.data})})).catch((function(e){console.log("Error in get users",e);var t={severity:"error",text:e.toString()};r({type:z,payload:t})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},He=r(57),Ye=r(85),Je=r(128),Ke=r(127),Qe=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B.a.post("/api/addFlashcard",{front:e.front,back:e.back,cardgroupid:e.cardgroupid},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:X,payload:t});r({type:z,payload:{severity:"success",text:"successfully created card"}})})).catch((function(e){console.log("This is an error yes plz"),console.log(e.toString());var t={severity:"error",text:e.toString()};r({type:z,payload:t})})),console.log("async call up in hier",e);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},Xe=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:L,payload:!0}),console.log("idd",e),t.next=4,B.a.get("/api/cardgroupflashcards/"+e).then((function(e){var t=e.data;console.log("lmlmlml"),console.log(t),r({type:ee,payload:t})})).catch((function(e){var t={severity:"error",text:e.toString()+" when attemting to get card"};r({type:z,payload:t})}));case 4:r({type:L,payload:!1});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},Ze=function(e){var t=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups})),r=Object(I.b)();Object(n.useEffect)((function(){r(ye())}),[]);var o=[];t.map((function(e,t){return o[t]=Object(a.jsxs)(y.a,{value:e.id,children:[e.title," "]},t)}));var i=c.a.useState(""),l=Object(s.a)(i,2),d=l[0],u=l[1];return Object(a.jsxs)(Ye.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Je.a,{id:"demo-simple-select-outlined-label",children:"Cardgroup"}),Object(a.jsx)(Ke.a,{required:!0,color:"secondary",labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d,onChange:function(t){u(t.target.value),e.onChange&&e.onChange(t.target.value)},label:"group",children:o.length?o:Object(a.jsx)(y.a,{value:"",children:Object(a.jsx)("em",{children:"No groups exists"})})})]})},$e=r(273),et=r(76),tt=r(155),rt=r.n(tt),at=r(154),nt=r.n(at),ct=Object(l.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),ot=function(e){var t=e.onClose,r=e.selectedValue,c=e.open,o=Object(I.b)(),i=ct(),l=e.cardgroupId,d=Object(n.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(n.useState)(""),p=Object(s.a)(h,2),g=p[0],f=p[1];Object(n.useEffect)((function(){e.card&&(console.log("cccc",e.card),b(e.card.front),f(e.card.back))}),[e.card]);var O=function(){t(r)};return Object(a.jsx)(we.a,{onClose:O,className:i.dialog,open:c,children:Object(a.jsx)("form",{onSubmit:function(t){var r;t.preventDefault(),console.log("id",l),j&&g&&l?(e.card?o((r={front:j,back:g,cardgroupid:l,id:e.card.id},function(){var e=Object(T.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("carddd",r),B.a.post("/api/editflashcard",{front:r.front,back:r.back,id:r.id},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var a=e.data;t({type:te,payload:r}),t({type:X,payload:a}),t({type:z,payload:{severity:"success",text:"successfully changed card"}})})).catch((function(e){console.log("This is an error yes plz"),console.log(e.toString());var r={severity:"error",text:e.toString()};t({type:z,payload:r})})),console.log("async call up in hier",r);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())):o(Qe({front:j,back:g,cardgroupid:l})),O()):(alert("fill inn all fields"),console.log(j,g,l))},style:{margin:"40px"},children:Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h5",children:"Edit a flashcard "})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{onChange:function(e){return b(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",color:"secondary",label:"Front",value:j,multiline:!0,rows:4})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{onChange:function(e){return f(e.target.value)},id:"asd",label:"Back",color:"secondary",multiline:!0,rows:4,defaultValue:"",value:g,fullWidth:!0,required:!0,variant:"outlined"})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:j&&g?"green":"grey",color:"white"},children:e.card?"edit":"submit"})})]})})})},it=function(e){var t=Object(I.b)(),r=Object(n.useState)({}),c=Object(s.a)(r,2),o=c[0],i=c[1],l=Object(n.useState)(!1),d=Object(s.a)(l,2),u=d[0],j=d[1],b=Object(I.c)((function(e){return e.loadingReducer.loading})),h=function(e){t(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("del,",e),t.next=3,B.a.delete("/api/deleteflashcard/"+e.id,{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(t){if(console.log(t.data),t.data.error)throw new Error(t.data.error);r({type:z,payload:{severity:"success",text:"successfully deleted card"}}),r({type:te,payload:e})})).catch((function(t){var a={severity:"error",text:t.toString()+" when attemting to delete card"};r({type:z,payload:a}),r({type:re,payload:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e))},p=function(e){console.log("edit",e),i(e),j(!0)};console.log("car1ds",e.cards);var g=[];return e.cards.length&&e.cards.map((function(e,t){return g[t]=Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)($e.a,{style:{padding:"10px",margin:"5px"},children:Object(a.jsxs)(be.a,{container:!0,spacing:0,children:[Object(a.jsxs)(be.a,{item:!0,xs:11,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:"Front:"}),Object(a.jsx)(S.a,{variant:"caption",children:e.front}),Object(a.jsx)(S.a,{variant:"subtitle2",children:"Back:"}),Object(a.jsx)(S.a,{variant:"caption",children:e.back})]}),Object(a.jsxs)(be.a,{item:!0,xs:1,style:{padding:"auto"},children:[Object(a.jsx)(et.a,{onClick:function(){return p(e)},children:Object(a.jsx)(nt.a,{style:{fontSize:"20px"}})}),Object(a.jsx)(et.a,{onClick:function(){return h(e)},children:Object(a.jsx)(rt.a,{style:{fontSize:"20px"}})})]})]})},e.id)})})),b?Object(a.jsx)(xe,{}):Object(a.jsxs)("div",{children:[o?Object(a.jsx)(ot,{open:u,onClose:function(e){j(!1)},cardgroupId:1,card:o}):Object(a.jsx)("div",{children:" "}),g.length?Object(a.jsx)(be.a,{container:!0,spacing:0,children:g}):Object(a.jsxs)("div",{style:{color:"grey",marginTop:"150px"},children:[Object(a.jsx)(S.a,{variant:"h5",children:"No cards"}),Object(a.jsxs)(S.a,{variant:"body1",children:["Add cards using the ",Object(a.jsx)("i",{children:"Add Flashcard"})," button"]})]})]})},st=function(e){var t=e.onClose,r=e.selectedValue,n=e.open,c=e.card;return Object(a.jsx)(we.a,{onClose:function(){t(r)},"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsx)(ce.a,{style:{width:"400px",height:"auto",margin:0},children:Object(a.jsx)(it,{cards:[c]})})})},lt=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.cardReducer.cards})),r=Object(n.useState)(!1),c=Object(s.a)(r,2),o=c[0],i=c[1],l=Object(n.useState)({}),d=Object(s.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(0),h=Object(s.a)(b,2),p=h[0],g=h[1];Object(n.useEffect)((function(){e(Xe(p)),console.log("status")}),[e,p]),console.log("cards"),console.log(t);var f=t.map((function(e){return{id:e.id,name:e.user.name,username:e.user.username,front:e.front,back:e.back}}));return console.log("cgid",p),Object(a.jsxs)(ie,{children:[Object(a.jsx)(st,{open:o,onClose:function(){return i(!1)},card:u}),Object(a.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(a.jsx)(Ze,{onChange:g}),Object(a.jsx)(S.a,{variant:"subtitle2",style:{marginTop:"20px"}})]}),Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(He.a,{onCellClick:function(e){return function(e){console.log("print",e.row),j(e.row),i(!0)}(e)},rows:f,columns:[{field:"username",headerName:"Username",width:130},{field:"front",headerName:"Card Front",width:130},{field:"back",headerName:"Card Back",width:130}],pageSize:5})})]})},dt=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.authReducer.loggedIn}));Object(n.useEffect)((function(){e(function(){var e=Object(T.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:L,payload:!0}),e.next=3,B.a.get("/api/login/callback",{withCredentials:!0}).then((function(e){if(e.data.error)throw new Error(e.data.error);var r=e.data.user_token,a=e.data.refresh_token;console.log("action, usertoken",r),console.log("action, refresh",a),localStorage.setItem("user_token",r),localStorage.setItem("refresh_token",a),t({type:P,payload:{loggedIn:!0}})})).catch((function(e){console.log("Error in signInCallback",e);var r={severity:"error",text:e.toString()};t({type:z,payload:r})}));case 3:t({type:L,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var r=Object(d.g)();return t&&r.push("/"),Object(a.jsx)(ie,{children:Object(a.jsx)(xe,{})})},ut=r(274),jt=Object(l.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),bt=function(e){var t=e.onClose,r=e.selectedValue,c=e.open,o=Object(I.b)(),i=jt(),l=e.cardgroupId,d=Object(n.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(n.useState)(""),p=Object(s.a)(h,2),g=p[0],f=p[1],O=function(){t(r)};return Object(a.jsx)(we.a,{onClose:O,className:i.dialog,open:c,children:Object(a.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("id",l),j&&g&&l){try{o(Qe({front:j,back:g,cardgroupid:l}))}catch(t){}b(""),f(""),O()}else alert("fill inn all fields"),console.log(j,g,l)},style:{margin:"40px"},children:Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h5",children:"Create a flashcard. This can be edited later "})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{onChange:function(e){return b(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",color:"secondary",label:"Front",value:j,multiline:!0,rows:4})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ke.a,{onChange:function(e){return f(e.target.value)},id:"asd",label:"Back",color:"secondary",multiline:!0,rows:4,defaultValue:"",value:g,fullWidth:!0,required:!0,variant:"outlined"})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{variant:"contained",onClick:O,fullWidth:!0,color:"primary",children:" Back"})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:j&&g?"green":"grey",color:"white"},children:"Submit"})})]})})})},ht=Object(l.a)((function(e){return{addButton:{backgroundColor:e.palette.button.success.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.success.dark}},delButton:{backgroundColor:e.palette.button.error.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.error.dark}},progressBar:{"& .MuiLinearProgress-barColorPrimary":{backgroundColor:e.palette.button.success.main}}}})),pt=function(e){console.log("prop"),console.log(e.match.params);var t=Object(n.useState)(!1),r=Object(s.a)(t,2),c=r[0],o=r[1],i=ht(),l=Object(I.c)((function(e){return e.authReducer.isAdmin})),u=Object(I.c)((function(e){return e.cardReducer.cards})),j=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups[0]})),b=Object(I.c)((function(e){return e.authReducer.loggedInUser})),h=Object(n.useState)(!1),p=Object(s.a)(h,2),g=p[0],f=p[1],O=Object(I.b)(),x=Math.round(u.length&&j?u.length/j.numberOfCardsDue*100:0),m=Object(I.c)((function(e){return e.loadingReducer.loading}));console.log("cardgr.:"),console.log(j),Object(n.useEffect)((function(){var t,r;console.log("stuff and things"),console.log(j),console.log(b),O((t=e.match.params.id,r=b.id,function(){var e=Object(T.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:L,payload:!0}),console.log("userid",r),console.log("cardgroupid",t),e.next=5,B.a.get("/api/cardgroupuserflashcards/"+t+"/"+r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);var t=e.data;console.log("lmlmlml"),console.log(t),a({type:ee,payload:t})})).catch((function(e){return console.log(e)}));case 5:a({type:L,payload:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),O(ve(e.match.params.id))}),[O,e.match.params.id]);return c?Object(a.jsx)(d.a,{to:{pathname:"/"}}):m?Object(a.jsx)(ie,{children:Object(a.jsx)(xe,{})}):Object(a.jsxs)(ie,{children:[Object(a.jsx)(bt,{open:g,onClose:function(e){f(!1)},cardgroupId:e.match.params.id}),j?Object(a.jsxs)(be.a,{container:!0,spacing:6,children:[Object(a.jsxs)(be.a,{item:!0,xs:8,children:[Object(a.jsx)(S.a,{variant:"h4",children:j.title}),Object(a.jsxs)(S.a,{variant:"body2",children:[j.numberOfCardsDue," cards are due",function(e){var t=new Date(e.year,e.month-1,e.date,e.hour,e.minute);return console.log("aa",t),t.toString()}(j.dueDate)]}),Object(a.jsx)("div",{style:{marginTop:"40px"},children:Object(a.jsx)(it,{cards:u})})]}),Object(a.jsxs)(be.a,{item:!0,xs:4,children:[Object(a.jsx)(A.a,{fullWidth:!0,style:{height:"80px"},className:i.addButton,variant:"outlined",onClick:function(){f(!0)},children:"+ Add Flashcard"}),Object(a.jsxs)(be.a,{container:!0,style:{margin:"30px 0",border:"0px solid black"},children:[Object(a.jsxs)(be.a,{item:!0,xs:8,children:[Object(a.jsx)(S.a,{variant:"body1",children:"You've created"}),Object(a.jsxs)(S.a,{variant:"body1",children:[u.length," of ",j.numberOfCardsDue]})]}),Object(a.jsx)(be.a,{item:!0,xs:4,children:Object(a.jsxs)(S.a,{variant:"h4",children:[x,"%"]})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(ut.a,{className:i.progressBar,variant:"determinate",value:x})})]}),l?Object(a.jsx)(A.a,{fullWidth:!0,style:{height:"80px"},className:i.delButton,variant:"outlined",onClick:function(){window.confirm("Are you sure you want to delete cardgroup with all cards?")&&(O(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("and action"),console.log(e.id),t.next=4,B.a.delete("/api/deletegroup/"+e.id,{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(t){if(console.log("to be deleted"),t.data.error)throw console.log("error"),new Error(t.data.error);var a={severity:"success",text:"successfully deleted cardgroup: "+e.title};r({type:z,payload:a}),r({type:K,payload:e})})).catch((function(e){var t={severity:"error",text:e.toString()};r({type:z,payload:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(j)),o(!0))},children:"Delete cardgroup and all cards"}):Object(a.jsx)("div",{})]}),Object(a.jsx)(be.a,{item:!0,xs:7})]}):Object(a.jsx)("div",{children:"suo"})]})},gt=function(){var e=Object(I.c)((function(e){return e.authReducer.loggedInUser})),t=Object(I.c)((function(e){return e.authReducer.isAdmin}));return Object(a.jsxs)(ie,{children:[t?Object(a.jsx)(S.a,{variant:"h3",children:"Admin profile"}):Object(a.jsx)(S.a,{variant:"h3",children:"User profile"}),e?Object(a.jsxs)("div",{children:[" ",Object(a.jsxs)("h2",{children:["You are logged in, ",e.name]}),Object(a.jsx)("span",{style:{color:"grey"},children:"username: "}),Object(a.jsx)("span",{children:e.username})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"email: "}),Object(a.jsx)("span",{children:e.email})," "]}):Object(a.jsx)("h1",{children:" Not logged in  "})]})},ft=function(e){var t=e.onClose,r=e.selectedValue,n=e.open,c=e.user,o=Object(I.b)(),i=function(){t(r)},s=function(){o(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:L,payload:!0}),B.a.get("/api/addadmin/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:q,payload:t})})).catch((function(e){return console.log(e)})),r({type:L,payload:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(c)),i()},l=function(){o(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:L,payload:!0}),B.a.get("/api/removeadmin/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:q,payload:t})})).catch((function(e){return console.log(e)})),r({type:L,payload:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(c)),i()};return Object(a.jsx)(we.a,{onClose:i,"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsxs)("div",{style:{padding:"30px",width:"500px"},children:[Object(a.jsxs)("h2",{children:["User: ",c.name]}),Object(a.jsx)("span",{style:{color:"grey"},children:"username: "}),Object(a.jsx)("span",{children:c.username})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"email: "}),Object(a.jsx)("span",{children:c.email})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"role: "}),Object(a.jsx)("span",{children:c.role})," ",Object(a.jsx)("br",{}),Object(a.jsx)("div",{style:{textAlign:"center",paddingTop:"50px"},children:"Admin"==c.role?Object(a.jsx)(A.a,{onClick:function(){return l()},variant:"outlined",children:"Remove admin"}):Object(a.jsx)(A.a,{onClick:function(){return s()},variant:"outlined",children:"Make admin"})})]})})},Ot=function(e){var t=Object(n.useState)("all"),r=Object(s.a)(t,2),c=r[0],o=r[1],i=Object(I.b)(),l=Object(I.c)((function(e){return e.userReducer.users})),d=Object(n.useState)(!1),u=Object(s.a)(d,2),j=u[0],b=u[1],h=Object(n.useState)({}),p=Object(s.a)(h,2),g=p[0],f=p[1],O=Object(n.useState)(""),x=Object(s.a)(O,2),m=x[0],v=x[1],w=function(e){"all"===e?(console.log("all da"),i(function(){var e=Object(T.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.a.get("/api/users/all",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("res data alll",e.data),t({type:F,payload:e.data})})).catch((function(e){console.log("Error in get users",e);var r={severity:"error",text:e.toString()};t({type:z,payload:r})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):"User"===e?i(Ve("User")):"Admin"===e&&(console.log("aadd"),i(Ve("Admin")))};Object(n.useEffect)((function(){w(c)}),[i,c]);var k=l,C=function(e){m?i(function(e,t){return function(){var r=Object(T.a)(_.a.mark((function r(a){return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:B.a.get("/api/users/search/role="+e+"/searchphrase="+t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("res data",e.data),a({type:F,payload:e.data})})).catch((function(e){console.log("Error in get users",e);var t={severity:"error",text:e.toString()};a({type:z,payload:t})}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(c,m)):w(c)};return Object(a.jsxs)(ie,{children:[Object(a.jsx)(ft,{open:j,onClose:function(){return b(!1)},user:g}),Object(a.jsxs)(be.a,{container:!0,spacing:1,children:[Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsxs)(Ye.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Je.a,{id:"demo-simple-select-label",children:"Filter"}),Object(a.jsxs)(Ke.a,{required:!0,color:"secondary",value:c,onChange:function(e){return function(e){v(""),o(e.target.value)}(e)},label:"show",children:[Object(a.jsx)(y.a,{value:"all",children:"All users"}),Object(a.jsx)(y.a,{value:"Admin",children:"Admins"}),Object(a.jsx)(y.a,{value:"User",children:"Users"})]})]})}),Object(a.jsx)(be.a,{item:!0,xs:6,children:Object(a.jsx)(ke.a,{id:"search",label:"Search username",color:"secondary",defaultValue:"",fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&C()},onChange:function(e){return v(e.target.value)},value:m,variant:"outlined",InputProps:{endAdornment:Object(a.jsx)(et.a,{onClick:C,children:Object(a.jsx)(He.b,{})})}})}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(He.a,{onCellClick:function(e){return function(e){console.log("print",e.row),f(e.row),b(!0)}(e)},rows:k,columns:[{field:"id",headerName:"id",width:70},{field:"username",headerName:"username",width:130},{field:"name",headerName:"name",width:130},{field:"email",headerName:"email",width:130},{field:"role",headerName:"role",width:130}],pageSize:5})})})]})]})},xt=r(283),mt=r(275),yt=Object(l.a)((function(e){return{navlink:{color:e.palette.textColor,textDecoration:"none"},button:{width:"250px",height:"50px"}}})),vt=function(e){var t=yt(),r=c.a.useState(0),o=Object(s.a)(r,2),i=o[0],l=o[1],j=Object(d.g)(),b=[{url:"/adminpage/users",label:"All Users"},{url:"/adminpage/deliverystatus",label:"Delivery Status"},{url:"/adminpage/allcards",label:"All Cards"}];return Object(n.useEffect)((function(){l(b.findIndex((function(e){return e.url===j.location.pathname})))}),[j.location.pathname]),Object(a.jsxs)(ie,{children:[Object(a.jsx)(S.a,{variant:"h4",style:{flexGrow:0},children:"Amin Page"}),Object(a.jsx)(C.a,{style:{padding:0},children:Object(a.jsx)(xt.a,{fullWidth:!0,value:i,exclusive:!0,"aria-label":"text alignment",children:b.map((function(e,r){return Object(a.jsx)(mt.a,{component:u.b,value:r,to:e.url,className:t.button,variant:"outlined",children:e.label})}))})})]})},wt=function(){return Object(d.g)().push("/adminpage/users"),Object(a.jsx)("div",{})},kt=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.userReducer.status})),r=Object(n.useState)(0),c=Object(s.a)(r,2),o=c[0],i=c[1];Object(n.useEffect)((function(){var r;e((r=o,function(){var e=Object(T.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:L,payload:!0}),r||t({type:G,payload:[]}),B.a.get("/api/deliverystatus/"+r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log("mah status"),console.log(r),t({type:G,payload:r})})).catch((function(e){return console.log(e)})),t({type:L,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),console.log("status"),console.log(t)}),[e,o]),console.log("usars");var l=t.map((function(e){return{id:e.user.id,username:e.user.username,delivered:e.delivered,toDeliver:e.cardgroup.numberOfCardsDue,complete:e.delivered==e.cardgroup.numberOfCardsDue}}));return console.log("cgid",o),Object(a.jsxs)(ie,{children:[Object(a.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(a.jsx)(Ze,{onChange:i}),Object(a.jsx)(S.a,{variant:"subtitle2",style:{marginTop:"20px"},children:t[0]?"Due: "+function(e){var t=new Date(e.year,e.month-1,e.date,e.hour,e.minute);return console.log("aa",t),t.toString()}(t[0].cardgroup.dueDate):"Due:"})]}),Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(He.a,{rows:l,columns:[{field:"username",headerName:"Username",width:130},{field:"delivered",headerName:"Delivered",type:"number",width:130},{field:"toDeliver",headerName:"To Deliver",type:"number",width:130},{field:"complete",headerName:"Complete",type:"number",width:130}],pageSize:5})})]})},Ct=Object(l.a)((function(e){return{}})),St=function(){Ct();var e=Object(I.b)(),t=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups}));Object(I.c)((function(e){return e.authReducer.isAdmin}));Object(n.useEffect)((function(){e(ye())}),[e]);var r=Object(d.g)();return Object(a.jsx)(ie,{children:Object(a.jsx)(be.a,{container:!0,spacing:5,children:Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsxs)(be.a,{item:!0,xs:12,children:[Object(a.jsx)(S.a,{variant:"h4",gutterBottom:!0,children:"Peer Review of Cards"}),Object(a.jsxs)(S.a,{variant:"body2",color:"textSecondary",children:["Todo:",Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:'Admin "create" peer review. Choose cardgroup, duedate for peer review and number of cards to review per student'}),Object(a.jsx)("li",{children:"Styling of this page.. Duedate and progress on peer review"}),Object(a.jsx)("li",{children:'Implement "mark as duplicated"'}),Object(a.jsx)("li",{children:"Collect random cards for each student to rate. Now, every card appears"})]})]})]}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(me,{cardgroups:t,onClick:function(e){r.push("/peerreview/group/"+e)}})})]})})})})},At=r(125),Rt=r(281),Et=r(157),It=r.n(Et),Dt=r(156),_t=r.n(Dt),Tt=r(158),Nt=r.n(Tt),Bt={ratings:[]},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return console.log("rating",t),Object(De.a)(Object(De.a)({},e),{},{ratings:[t.payload]});default:return console.log("default alert"),e}},zt=Object(l.a)((function(e){return{container:{padding:"10px",minHeight:"150px",margin:"10px 0"},duplicateButton:{fontSize:"10px",marginTop:"10px"},body:{minHeight:"100px"}}})),Ut=function(e){var t=e.card,r=e.index,c=e.save,o=zt(),i=Object(n.useState)(!1),l=Object(s.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(0),b=Object(s.a)(j,2),h=b[0],p=b[1],g=Object(n.useState)(0),f=Object(s.a)(g,2),O=(f[0],f[1],Object(n.useState)("")),x=Object(s.a)(O,2),m=x[0],y=x[1],v=(Object(I.c)((function(e){return e.loadingReducer.loading})),Object(n.useState)(0)),w=Object(s.a)(v,2),k=w[0],C=w[1],R=Object(I.b)(),E=Object(I.c)((function(e){return e.ratingReducer.ratings.find((function(e){return e.card.id==t.id}))}));Object(n.useEffect)((function(){var e;console.log("fml"),R((e=t.id,function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("/api/getrating/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("returned"),console.log(e.data);var t=e.data;console.log("was found, ",t),r({type:ae,payload:t})})).catch((function(e){console.log("Not found")}));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()))}),[]),Object(n.useEffect)((function(){E&&(p(E.difficulty),C(E.quality_rating),y(E.savedatestring))}),[E]),Object(n.useEffect)((function(){c&&D()}),[c]);var D=function(){if(h&&k){console.log("rate");var e={difficulty:h,quality:k,cardId:t.id};R(function(e){var t=e.rating;return e.cardNumber,function(){var e=Object(T.a)(_.a.mark((function e(r,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:L,payload:!0}),e.next=3,B.a.post("/api/addrating",{difficulty:t.difficulty,quality:t.quality,cardId:t.cardId},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("returned"),console.log(e.data);var t=e.data;console.log("was created, ",t),r({type:z,payload:{severity:"success",text:"Ratings saved successfully"}}),r({type:ae,payload:t})})).catch((function(e){console.log("This is an error yes plz");var t={severity:"error",text:e.toString()};r({type:z,payload:t})}));case 3:console.log("async call up in hier",t),r({type:L,payload:!1});case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}({rating:e,cardNumber:r}))}};return Object(a.jsxs)(be.a,{className:o.container,container:!0,spacing:2,children:[Object(a.jsxs)(be.a,{item:!0,xs:1,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:"#"}),Object(a.jsx)(S.a,{variant:"body2",children:r})]}),Object(a.jsxs)(be.a,{item:!0,xs:3,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:"Question"}),Object(a.jsx)(S.a,{variant:"body2",children:t.front})]}),Object(a.jsxs)(be.a,{item:!0,xs:5,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:d?"Answer":"Reveal Answer"}),d?Object(a.jsxs)(S.a,{className:o.body,variant:"body2",children:[" ",d?t.back:""]}):Object(a.jsx)("div",{}),Object(a.jsx)(At.a,{title:d?"Hide Answer":"Reveal Answer",placement:"right",children:Object(a.jsx)(et.a,{onClick:function(){return u(!d)},variant:"outlined",className:o.revealButton,size:"small",children:d?Object(a.jsx)(_t.a,{size:"small",color:"primary"}):Object(a.jsx)(It.a,{size:"small",color:"primary"})})})]}),Object(a.jsxs)(be.a,{item:!0,xs:3,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:"Rate"}),Object(a.jsx)(S.a,{variant:"body2",children:" Difficulty"}),Object(a.jsx)(Rt.a,{value:h/2,precision:.5,size:"small",onChange:function(e,t){p(2*t)}}),Object(a.jsx)(S.a,{variant:"body2",children:"Relevance and Quality"}),Object(a.jsx)(Rt.a,{value:k/2,precision:.5,size:"small",onChange:function(e,t){C(2*t)}}),Object(a.jsx)(A.a,{className:o.duplicateButton,onClick:function(){console.log("duplicate"),alert("Mark as duplicate not yet implemented")},variant:"contained",color:"primary",size:"small",endIcon:Object(a.jsx)(Nt.a,{}),children:"Mark as duplicate"})]}),Object(a.jsx)(be.a,{item:!0,xs:12,style:{height:"24px"},children:Object(a.jsxs)(S.a,{variant:"caption",color:"textSecondary",children:[m?"Last saved "+m:""," "]})})]})},Pt=r(113),Mt=r.n(Pt),Wt=function(e){var t=e.match.params.id,r=Object(I.c)((function(e){return e.cardReducer.cards})),o=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups[0]})),i=Object(n.useState)(!1),l=Object(s.a)(i,2),d=l[0],u=l[1],j=Object(I.b)();Object(n.useEffect)((function(){j(Xe(t)),j(ve(t))}),[]),console.log(r);var b=Object(I.c)((function(e){return e.loadingReducer.loading}));Object(n.useEffect)((function(){b||u(!1)}),[b]);return r&&o?Object(a.jsxs)(ie,{children:[Object(a.jsx)(S.a,{variant:"h4",children:"Peer Review of Cards from "}),Object(a.jsx)(S.a,{variant:"h4",children:o.title}),Object(a.jsxs)(S.a,{variant:"body2",color:"textSecondary",children:["(find amount) number of cards are due to be rated. Read the question, attempt to answer it to yourself, then you may reveal the answer. After testing the card, you are to rate it based on three criteria, try to be objective:",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Level of Difficulty"})," An objective rating on whether the difficulty of the card is appropriate. Too easy or too hard? Rate the card low. Good level of difficulty? Rate the card high. ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Relevance and Quality"})," A rating of how relevant the card is to the course curriculum and the quality of the flashcard. Will studying this card be useful for learning the course material? Is the question well-phrased? Is it too long and complex? Is it original? the cource material? Is the question well phrased? Is it too long and complex? Is it original?",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Mark as Duplicate"}),'  If two or more cards are very similar or duplicate of each other, press "mark as duplicate" on one of the cards and choose one or more of the other cards.']}),Object(a.jsx)(ce.a,{mb:5}),Object(a.jsx)(je.a,{}),r.length?r.map((function(e,t){return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Ut,{card:e,index:t+1,save:d},e.id),Object(a.jsx)(je.a,{})]})})):Object(a.jsx)("div",{children:"empty"}),Object(a.jsxs)("div",{style:{margin:"10px",textAlign:"left"},children:[Object(a.jsxs)(A.a,{color:"primary",variant:"contained",onClick:function(){console.log("save..."),u(!0)},children:["Save Ratings",Object(a.jsx)(xe,{style:{marginLeft:"10px",height:"26px"},size:24,alternative:Object(a.jsx)(Mt.a,{})})]})," ",Object(a.jsx)("br",{})]})]}):Object(a.jsx)(xe,{})},Ft=function(){return Object(a.jsx)(ie,{children:Object(a.jsxs)(be.a,{container:!0,spacing:2,children:[Object(a.jsxs)(be.a,{item:!0,xs:12,children:[Object(a.jsx)(S.a,{variant:"h4",gutterBottom:!0,children:" Study "}),Object(a.jsxs)(S.a,{variant:"body2",color:"textSecondary",children:["Page for studying cards.                     ",Object(a.jsx)("br",{}),"Todo:",Object(a.jsx)("br",{}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Spaced Repition review"}),Object(a.jsx)("li",{children:'"random" cards review from each chapter'})]})]})]}),Object(a.jsx)(be.a,{item:!0,xs:12,children:Object(a.jsx)(je.a,{})})]})})},qt=Object(l.a)((function(e){return{}})),Gt=function(){return Object(a.jsx)("div",{children:"FML"})},Vt=function(){var e=qt(),t=Object(I.c)((function(e){return e.authReducer.loggedIn})),r=Object(I.c)((function(e){return e.authReducer.isAdmin})),o=Object(I.b)();return Object(n.useEffect)((function(){o(function(){var e=Object(T.a)(_.a.mark((function e(t,r){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("user_token"),n=localStorage.getItem("refresh_token"),console.log("user_token?",Boolean(a)),console.log("refresh_token?",Boolean(n)),a&&n?(console.log("found both tokens"),B.a.get("/api/getcurrentuser",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("found user?",e.data),console.log("true? ","Admin"===e.data.role);var r={loggedIn:!0,loggedInUser:e.data,isAdmin:"Admin"==e.data.role};t({type:W,payload:r})})).catch((function(e){console.log("error..",e),t({type:W,payload:{loading:!1,loggedInUser:{}}})}))):(console.log("no user logged in"),t({type:W,payload:{loggedIn:!1,loggedInUser:{},loading:!1}}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),console.log("is logged",t),console.log("is admin",r)}),[t,o]),Object(a.jsx)("div",{className:e.pages,children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,component:t?Be:Fe}),Object(a.jsx)(d.b,{path:"/loginfunc",exact:!0,component:dt}),t?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(d.b,{path:"/cardgroup/:id",exact:!0,component:pt}),Object(a.jsx)(d.b,{path:"/peerreview",exact:!0,component:St}),Object(a.jsx)(d.b,{path:"/peerreview/group/:id",exact:!0,component:Wt}),Object(a.jsx)(d.b,{path:"/study",exact:!0,component:Ft}),Object(a.jsx)(d.b,{path:"/about",exact:!0,component:Gt}),Object(a.jsx)(d.b,{path:"/userprofile/:username",exact:!0,component:gt}),r?Object(a.jsx)(c.a.Fragment,{children:Object(a.jsx)(d.b,{path:"/adminpage",render:function(e){var t=e.match.url;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(vt,{}),Object(a.jsx)(d.b,{path:"".concat(t,"/"),exact:!0,component:wt}),Object(a.jsx)(d.b,{path:"".concat(t,"/users"),exact:!0,component:Ot}),Object(a.jsx)(d.b,{path:"".concat(t,"/deliverystatus"),exact:!0,component:kt}),Object(a.jsx)(d.b,{path:"".concat(t,"/allcards"),exact:!0,component:lt})]})}})}):Object(a.jsx)(c.a.Fragment,{})]}):Object(a.jsx)("div",{})]})})},Ht=r(276),Yt=r(272),Jt=r(78),Kt=r(119),Qt=r.n(Kt),Xt=r(100),Zt=Object(Jt.a)({palette:{type:"dark",textColor:"#fff",primary:{main:"#171717"},secondary:{main:"#000"},button:{main:Qt.a[500],success:{main:"#078900",dark:"#0ab500"},error:{main:"#000"}},hover:"f0f0f0"},values:{siteSideMargin:"25%",siteTopMargin:"75px"}}),$t=Object(Jt.a)({root:{},palette:{primary:{main:"#00509e"},secondary:{main:Xt.a[500]},textColor:"#000",button:{main:Qt.a[500],success:{main:"#078900",dark:"#0ab500"},error:{main:"#931A00",dark:"#60190B"}},hover:"f0f0f0"},values:{siteSideMargin:"25%",siteTopMargin:"75px"}}),er=r(279),tr=r(282),rr=function(){var e=Object(I.c)((function(e){return e.alertReducer.severity})),t=Object(I.c)((function(e){return e.alertReducer.text})),r=Object(I.c)((function(e){return e.alertReducer.newAlert})),o=c.a.useState(!1),i=Object(s.a)(o,2),l=i[0],d=i[1],u=Object(I.b)();Object(n.useEffect)((function(){r&&(d(!0),u({type:U}))}),[r]);var j=function(e,t){"clickaway"!==t&&d(!1)};return Object(a.jsx)(tr.a,{open:l,autoHideDuration:6e3,onClose:j,children:Object(a.jsx)(er.a,{onClose:j,severity:e,children:t})})},ar=(Object(l.a)((function(e){return{footer:{display:"flex",minHeight:"100px",flexDirection:"column"},navbar:{backgroundColor:"grey",color:"white",textColor:"white"}}})),function(){var e=c.a.useState(!1),t=Object(s.a)(e,2),r=t[0],o=t[1];Object(n.useEffect)((function(){var e=sessionStorage.getItem("dark-mode");console.log("init darkmode",e),e?"true"===e&&o(!0):sessionStorage.setItem("dark-mode","false")}),[]);return Object(a.jsxs)(Yt.a,{theme:r?Zt:$t,children:[Object(a.jsx)(Ht.a,{}),Object(a.jsxs)(u.a,{children:[Object(a.jsx)(ue,{setDarkMode:function(){var e=sessionStorage.getItem("dark-mode");console.log(e),"true"===e?(o(!1),sessionStorage.setItem("dark-mode","false")):"false"===e&&(o(!0),sessionStorage.setItem("dark-mode","true"))}}),Object(a.jsx)(rr,{}),Object(a.jsx)(Vt,{})]})]})}),nr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,287)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),a(e),n(e),c(e),o(e)}))},cr=r(70),or=r(29),ir={cards:[]},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return console.log("created card",t.payload),console.log(e),console.log(Object(De.a)(Object(De.a)({},e),{},{cards:[].concat(Object(or.a)(e.cards),[t.payload])})),Object(De.a)(Object(De.a)({},e),{},{cards:[].concat(Object(or.a)(e.cards),[t.payload])});case Z:return Object(De.a)({},e);case $:return console.log("got card",t.payload),Object(De.a)(Object(De.a)({},e),{},{cards:t.payload});case ee:return console.log("got cards",t.payload),console.log(Object(De.a)(Object(De.a)({},e),{},{cards:t.payload})),Object(De.a)(Object(De.a)({},e),{},{cards:t.payload});case te:return console.log("deleting dem cards"),console.log(e.cards),console.log(e.cards.filter((function(e){return e.id!==t.payload.id}))),Object(De.a)(Object(De.a)({},e),{},{cards:e.cards.filter((function(e){return e.id!==t.payload.id}))});case re:default:return e}},lr={success:null,cardgroups:[]},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return console.log("created cardgroup",t.payload),console.log(e),console.log(Object(De.a)(Object(De.a)({},e),{},{cardgroups:[].concat(Object(or.a)(e.cardgroups),[t.payload])})),Object(De.a)(Object(De.a)({},e),{},{cardgroups:[].concat(Object(or.a)(e.cardgroups),[t.payload])});case H:return e;case Y:return console.log("got cardgroups",t.payload),console.log(Object(De.a)(Object(De.a)({},e),{},{cardgroups:t.payload})),Object(De.a)(Object(De.a)({},e),{},{cardgroups:t.payload});case J:return console.log("cardgroup",t.payload),Object(De.a)(Object(De.a)({},e),{},{cardgroups:t.payload});case K:return console.log("deleting cardgroup"),console.log(e.cardgroups),console.log(e.cardgroups.filter((function(e){return e.id!==t.payload.id}))),Object(De.a)(Object(De.a)({},e),{},{cardgroups:e.cardgroups.filter((function(e){return e.id!==t.payload.id}))});case Q:default:return e}},ur={newAlert:!1,severity:"",text:""},jr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return console.log("Alert",t),{severity:t.payload.severity,text:t.payload.text,newAlert:!0};case U:return Object(De.a)(Object(De.a)({},e),{},{newAlert:!1});default:return console.log("default alert"),e}},br=Object(cr.c)({authReducer:Te,cardReducer:sr,cardgroupReducer:dr,alertReducer:jr,loadingReducer:ge,userReducer:Ge,ratingReducer:Lt}),hr=r(159),pr=Object(cr.d)(br,Object(cr.a)(hr.a));i.a.render(Object(a.jsx)(I.a,{store:pr,children:Object(a.jsx)(ar,{})}),document.getElementById("root")),nr()}},[[222,1,2]]]);
//# sourceMappingURL=main.3f6b827d.chunk.js.map