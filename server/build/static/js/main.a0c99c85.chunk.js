(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{193:function(e,t,r){},217:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(0),o=r.n(n),c=r(16),l=r.n(c),s=(r(193),r(7)),i=r(46),d=r(26),u=r(29),j=r(108),b=r.n(j),g=r(109),p=r.n(g),h=r(111),f=r.n(h),O=r(112),x=r.n(O),m=r(150),y=r(75),v=r(258),w=r(110),k=r.n(w),C=r(259),S=r(161),A=r(80),E=r(222),R=r(223),I=r(9),D=r(12),_=r.n(D),T=r(21),B=r(18),N=r.n(B),U="SET_LOADING",L="SET_ALERT",z="LOG_IN_CALLBACK",W="LOG_OUT",P="LOG_IN_STATUS",F="GET_USERS",M="UPDATE_USER",G="GET_DELIVERY_STATUS",V="CREATE_CARDGROUP",q="CREATE_CARDGROUP_ERROR",H="LOAD_CARDGROUPS",Y="LOAD_CARDGROUP",J="DELETE_CARDGROUP",K="DELETE_CARDGROUP_ERROR",Q="CREATE_CARD",X="CREATE_CARD_ERROR",Z="LOAD_CARD",$="LOAD_CARDS",ee="DELETE_CARD",te="DELETE_CARD_ERROR",re=r(6),ae=r(272),ne="600px",oe=(Object(i.a)((function(e){return{pageWrapper:{marginLeft:"100px",marginRight:"200px"}}})),Object(re.a)({root:{marginLeft:"auto",marginRight:"auto",maxWidth:ne,minWidth:ne,marginTop:"50px"}})(ae.a)),ce=Object(re.a)({root:{marginLeft:"auto",marginRight:"auto",maxWidth:ne,minWidth:ne}})(ae.a),le=Object(i.a)((function(e){return{link:{color:e.palette.textColor,textDecoration:"none"},navbar:{backgroundColor:e.palette.primary.main,color:"white",textColor:"white"}}})),se=function(e){var t=le(),r=Object(I.c)((function(e){return e.authReducer.loggedInUser})),n=Object(I.b)(),c=o.a.useState(null),l=Object(s.a)(c,2),i=l[0],j=l[1],g=function(){j(null)};return console.log(r),r.username?r.username?Object(a.jsxs)("div",{children:[Object(a.jsxs)(A.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},children:[Object(a.jsx)(b.a,{}),Object(a.jsx)("div",{style:{marginLeft:"5px"},children:r.username}),Object(a.jsx)(p.a,{})]}),Object(a.jsxs)(m.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:g,children:[Object(a.jsx)(u.b,{to:"/userprofile/"+r.username,className:t.link,children:Object(a.jsxs)(y.a,{onClick:g,children:[Object(a.jsx)(k.a,{})," My Profile"]})}),Object(a.jsxs)(y.a,{onClick:function(){e.setDarkMode()},children:[Object(a.jsx)(f.a,{}),"Toggle Dark Mode"]}),Object(a.jsxs)(y.a,{onClick:function(){console.log("out"),n(function(){var e=Object(T.a)(_.a.mark((function e(t,r){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("user_token")&&(a=localStorage.getItem("user_token"),N.a.post("/api/logout/access",{},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){e.data.error?console.error(e.data.error):localStorage.removeItem("user_token")}))),localStorage.getItem("refresh_token")&&(n=localStorage.getItem("refresh_token"),N.a.post("/api/logout/refresh",{},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(e.data.error)throw new Error(e.data.error);localStorage.removeItem("refresh_token")}))),localStorage.clear(),console.log("logging out..."),t({type:W,payload:{loggedIn:!1,loggedInUser:{}}});case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),g()},children:[Object(a.jsx)(x.a,{})," Logout"]})]})]}):Object(a.jsx)(u.c,{style:{color:"white",whiteSpace:"nowrap"},to:"/",children:" Log in"}):(console.log("true"),Object(a.jsx)(d.a,{to:"/"}))},ie=function(e){var t=le(),r=Object(n.useState)(!1),c=Object(s.a)(r,2),l=c[0],i=c[1],j=Object(I.c)((function(e){return e.authReducer.loggedIn})),b=Object(I.c)((function(e){return e.authReducer.isAdmin}));return l&&!j?(i(!1),Object(a.jsx)(d.a,{to:{pathname:"/"}})):Object(a.jsx)(v.a,{position:"static",style:{},children:Object(a.jsx)(ce,{className:t.navbar,children:Object(a.jsxs)(C.a,{style:{padding:0},children:[Object(a.jsx)(S.a,{variant:"h6",style:{flexGrow:0},children:"TTK4145 Flashcards"}),Object(a.jsx)(E.a,{style:{textColor:"white",display:"flex"},children:j?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(R.a,{children:Object(a.jsxs)(u.c,{style:{color:"white",whiteSpace:"nowrap"},to:"/",children:[" ",j?"Home":"Log in"]})}),b?Object(a.jsx)(R.a,{children:Object(a.jsx)(u.c,{style:{color:"white",whiteSpace:"nowrap"},to:"/adminpage",children:" Admin Page"})}):Object(a.jsx)("div",{})]}):Object(a.jsx)("div",{})}),Object(a.jsx)("div",{style:{marginLeft:"auto"},children:Object(a.jsx)(se,{setDarkMode:e.setDarkMode})})]})})})},de=r(260),ue=r(261),je=r(262),be={loading:!1},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return console.log("laading",t),{loading:t.payload};default:return console.log("default alert"),e}},pe=r(224),he=function(){return Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)(pe.a,{color:"secondary"})})},fe=function(e){var t=e.cardgroups,r=Object(I.c)((function(e){return e.loadingReducer.loading})),o=Object(n.useState)(-1),c=Object(s.a)(o,2),l=c[0],i=c[1],u=function(e){console.log("ddatee"),console.log(e);try{var t=new Date(e.year,e.month-1,e.date,e.hour,e.minute);return console.log("aa",t),t.toString()}catch(r){return"Date error"}},j=t.map((function(e){return Object(a.jsxs)(de.a,{item:!0,xs:12,children:[Object(a.jsx)(ue.a,{onClick:function(t){return r=e.id,console.log("redirect"),console.log(r),void i(r);var r},style:{padding:"10px",minHeight:"100px"},children:Object(a.jsx)(de.a,{container:!0,spacing:2,children:Object(a.jsxs)(de.a,{item:!0,xs:12,children:[Object(a.jsx)(S.a,{variant:"subtitle1",component:"h2",children:e.title}),Object(a.jsxs)(S.a,{variant:"body2",color:"textSecondary",component:"h2",children:[e.numberOfCardsDue," cards are due: ",u.call(undefined,e.dueDate)]})]})})}),Object(a.jsx)(je.a,{})]},e.id)}));return r?Object(a.jsx)(he,{}):l>0?Object(a.jsx)(d.a,{to:{pathname:"/cardgroup/"+l}}):j?Object(a.jsxs)("div",{children:[Object(a.jsx)(je.a,{}),Object(a.jsxs)(de.a,{container:!0,spacing:0,children:[Object(a.jsx)(je.a,{}),j]})]}):Object(a.jsx)("div",{children:"empty"})},Oe=function(){return function(){var e=Object(T.a)(_.a.mark((function e(t,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:U,payload:!0}),e.next=3,N.a.get("/api/cardgroups").then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log("mah cardgroups"),console.log(r),t({type:H,payload:r})})).catch((function(e){return console.log(e)}));case 3:t({type:U,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},xe=r(274),me=r(165),ye=r(155),ve=r(33),we=r(271),ke=function(e){var t=e.onClose,r=e.selectedValue,n=e.open;return Object(a.jsx)(xe.a,{onClose:function(){t(r)},"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsx)("div",{children:"Are you sure??"})})},Ce=Object(i.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),Se=function(e){var t=e.onClose,r=e.selectedValue,c=e.open,l=Object(I.b)(),i=o.a.useState(null),d=Object(s.a)(i,2),u=d[0],j=d[1],b=Object(n.useState)(""),g=Object(s.a)(b,2),p=g[0],h=g[1],f=Object(n.useState)(0),O=Object(s.a)(f,2),x=O[0],m=O[1],y=Object(n.useState)("23:59"),v=Object(s.a)(y,2),w=v[0],k=v[1],C=Ce();Object(n.useEffect)((function(){console.log(w)}),[w]);var E=function(){j(null),h(""),m(0),k("23:59"),t(r)};return Object(a.jsxs)(xe.a,{onClose:E,className:C.dialog,open:c,style:{margin:"100px"},children:[Object(a.jsx)(ke,{}),Object(a.jsxs)("div",{style:{margin:"40px 40px"},children:[Object(a.jsx)(de.a,{container:!0,spacing:2,children:Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h6",align:"left",children:"New Cardgroup"})})}),Object(a.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),p&&u&&x&&w){console.log(u);var t=u.getFullYear(),r=u.getMonth()+1,a=u.getDate(),n=w.split(":")[0],o=w.split(":")[1];l((c={title:p,dueDate:{year:t,month:r,date:a,hour:n,minute:o,second:59},numberOfCardsDue:x},function(){var e=Object(T.a)(_.a.mark((function e(t,r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("c cardgroup"),console.log(c),N.a.post("/api/addcardgroup",{title:c.title,numberOfCardsDue:c.numberOfCardsDue,dueDate:c.dueDate},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(e.data.error)throw new Error(e.data.error);if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log(r.dueDate),console.log("was created, ",r);var a={severity:"success",text:"successfully created cardgroup: "+r.title};t({type:L,payload:a}),t({type:V,payload:r})})).catch((function(e){console.log("This is an error yes plz");var r={severity:"error",text:e.toString()};t({type:L,payload:r})})),console.log("async call up in hier",c);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),E()}var c},children:Object(a.jsxs)(de.a,{container:!0,spacing:2,children:[Object(a.jsx)(de.a,{item:!0,xs:12}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{color:"secondary",onChange:function(e){return h(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",label:"Cardgroup title"})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{fullWidth:!0,color:"secondary",id:"outlined-number",label:"Number of flashcards for delivery pr student",type:"number",required:!0,onChange:function(e){return m(e.target.value)},variant:"outlined"})}),Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsx)(ve.a,{utils:ye.a,children:Object(a.jsx)(we.a,{fullWidth:!0,disableToolbar:!0,required:!0,inputVariant:"outlined",variant:"outlined",format:"MM/dd/yyyy",id:"date-picker-inline",label:"Due date for delivery",value:u,onChange:function(e){j(e)},onClick:console.log("close"),color:"secondary",autoOk:!0,animateYearScrolling:!0,KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsx)(me.a,{fullWidth:!0,id:"time",label:"",type:"time",variant:"outlined",onChange:function(e){return k(e.target.value)},defaultValue:"23:59",color:"secondary",InputLabelProps:{shrink:!0}})}),Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{variant:"contained",onClick:E,fullWidth:!0,color:"primary",children:" Back"})}),Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:u&&p&&x?"green":"grey",color:"white"},children:"Submit"})})]})})]})]})},Ae=r(15),Ee={loggedIn:!1,loggedInUser:{},isAdmin:!1},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return console.log("successfull login callback"),Object(Ae.a)(Object(Ae.a)({},e),{},{loggedIn:t.payload.loggedIn,isAdmin:t.payload.isAdmin});case W:return console.log("logging out"),console.log(t.payload),Object(Ae.a)(Object(Ae.a)({},e),{},{loggedIn:t.payload.loggedIn,loggedInUser:t.payload.loggedInUser});case P:return console.log("fetching status"),console.log(t.payload),Object(Ae.a)(Object(Ae.a)({},e),{},{loggedIn:t.payload.loggedIn,loggedInUser:t.payload.loggedInUser,isAdmin:t.payload.isAdmin});default:return console.log("default auth"),e}},Ie=Object(i.a)((function(e){return{addButton:{backgroundColor:e.palette.button.success.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.success.dark}}}})),De=function(){var e=Ie(),t=Object(I.b)(),r=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups})),c=Object(I.c)((function(e){return e.authReducer.isAdmin}));Object(n.useEffect)((function(){t(Oe())}),[t]),Object(n.useEffect)((function(){console.log("cardgroups changed...")}),[r]);var l=o.a.useState(!1),i=Object(s.a)(l,2),d=i[0],u=i[1];return Object(a.jsxs)(oe,{children:[Object(a.jsxs)(de.a,{container:!0,spacing:2,children:[Object(a.jsx)(de.a,{item:!0,xs:8,children:Object(a.jsx)(S.a,{variant:"h4",gutterBottom:!0,children:"Card Groups"})}),Object(a.jsx)(de.a,{item:!0,xs:4,children:c?Object(a.jsx)(A.a,{fullWidth:!0,className:e.addButton,variant:"outlined",onClick:function(){u(!0)},children:"+ Create group"}):Object(a.jsx)("div",{})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(fe,{cardgroups:r})})]}),Object(a.jsx)(Se,{open:d,onClose:function(e){u(!1)}})]})},_e=r(265),Te=r(91),Be=Object(Te.a)(_e.a)({color:"black",padding:"20px"}),Ne=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),r=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],u=l[1],j=Object(n.useState)(""),b=Object(s.a)(j,2),g=b[0],p=b[1],h=Object(I.b)(),f=Object(n.useState)(!1),O=Object(s.a)(f,2),x=O[0],m=O[1];return x?Object(a.jsx)(d.a,{to:{pathname:"/loginfunc"}}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{marginBottom:0,marginTop:"50px"},children:Object(a.jsx)("h3",{style:{fontSize:"14px",color:"#666",display:"inline",padding:"12px"},children:"ALTERNATIVE LOGIN - JUST FOR TESTING"})}),Object(a.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),r&&i&&g){var t={username:r,email:i,name:g};fetch("/api/userdata",{method:"POST",body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),"success"!==e.status)throw e.error;console.log("redirecting"),m(!0)})).catch((function(e){h({type:L,payload:{severity:"error",text:e}})}))}else h({type:L,payload:{severity:"error",text:"Missing credentials for login"}})},children:[Object(a.jsx)(me.a,{label:"username",onChange:function(e){return o(e.target.value)},required:!0}),"  ",Object(a.jsx)("br",{}),Object(a.jsx)(me.a,{label:"name",onChange:function(e){return p(e.target.value)},required:!0})," ",Object(a.jsx)("br",{}),Object(a.jsx)(me.a,{label:"email",onChange:function(e){return u(e.target.value)},required:!0})," ",Object(a.jsx)("br",{}),Object(a.jsx)(A.a,{variant:"contained",style:{margin:"30px"},type:"submit",children:"Manual Login (for testing)"})]})]})};var Ue=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],o=t[1],c=Object(I.b)();return Object(a.jsxs)(oe,{style:{textAlign:"center",marginTop:"15%"},children:[Object(a.jsx)(A.a,{color:"primary",variant:"contained",onClick:function(){N.a.get("/api/logintoken",{withCredentials:!0}).then((function(e){window.open("https://www.itk.ntnu.no/api/feide.php?token="+e.data.token+"&returnURL=https://asgeirdemo.herokuapp.com/api/userdata","_self")})).catch((function(e){console.log("err",e);c({type:L,payload:{severity:"error",text:"External login failed"}})}))},style:{width:"300px",height:"80px"},children:"Log in with Feide"})," ",Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{padding:"10px"},children:[Object(a.jsx)(Be,{href:"#",onClick:function(e){return o(!r)},children:"Alternative login"}),Object(a.jsx)(Be,{target:"_blank",href:"https://s.ntnu.no/glemt",children:"Forgot Password"})]}),r?Object(a.jsx)(Ne,{}):Object(a.jsx)("div",{children:" "})]})},Le={users:[],status:[]},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return console.log("successfull get users"),Object(Ae.a)(Object(Ae.a)({},e),{},{users:t.payload});case G:return console.log("successfull get status"),Object(Ae.a)(Object(Ae.a)({},e),{},{status:t.payload});case M:return console.log("updated user"),Object(Ae.a)(Object(Ae.a)({},e),{},{users:e.users.map((function(e){return e.id==t.payload.id?t.payload:e}))});default:return console.log("default auth"),e}},We=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N.a.get("/api/users/role="+e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(t){if(t.data.error)throw new Error(t.data.error);console.log("res data role ="+e,t.data),r({type:F,payload:t.data})})).catch((function(e){console.log("Error in get users",e);var t={severity:"error",text:e.toString()};r({type:L,payload:t})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Pe=r(54),Fe=r(85),Me=r(127),Ge=r(126),Ve=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:N.a.post("/api/addFlashcard",{front:e.front,back:e.back,cardgroupid:e.cardgroupid},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:Q,payload:t});r({type:L,payload:{severity:"success",text:"successfully created card"}})})).catch((function(e){console.log("This is an error yes plz"),console.log(e.toString());var t={severity:"error",text:e.toString()};r({type:L,payload:t})})),console.log("async call up in hier",e);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},qe=function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:U,payload:!0}),console.log("idd",e),t.next=4,N.a.get("/api/cardgroupflashcards/"+e).then((function(e){var t=e.data;console.log("lmlmlml"),console.log(t),r({type:$,payload:t})})).catch((function(e){var t={severity:"error",text:e.toString()+" when attemting to get card"};r({type:L,payload:t})}));case 4:r({type:U,payload:!1});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},He=function(e){var t=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups})),r=Object(I.b)();Object(n.useEffect)((function(){r(Oe())}),[]);var c=[];t.map((function(e,t){return c[t]=Object(a.jsxs)(y.a,{value:e.id,children:[e.title," "]},t)}));var l=o.a.useState(""),i=Object(s.a)(l,2),d=i[0],u=i[1];return Object(a.jsxs)(Fe.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Me.a,{id:"demo-simple-select-outlined-label",children:"Cardgroup"}),Object(a.jsx)(Ge.a,{required:!0,color:"secondary",labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d,onChange:function(t){u(t.target.value),e.onChange&&e.onChange(t.target.value)},label:"group",children:c.length?c:Object(a.jsx)(y.a,{value:"",children:Object(a.jsx)("em",{children:"No groups exists"})})})]})},Ye=r(267),Je=r(76),Ke=r(153),Qe=r.n(Ke),Xe=r(152),Ze=r.n(Xe),$e=Object(i.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),et=function(e){var t=e.onClose,r=e.selectedValue,o=e.open,c=Object(I.b)(),l=$e(),i=e.cardgroupId,d=Object(n.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1],g=Object(n.useState)(""),p=Object(s.a)(g,2),h=p[0],f=p[1];Object(n.useEffect)((function(){e.card&&(console.log("cccc",e.card),b(e.card.front),f(e.card.back))}),[e.card]);var O=function(){t(r)};return Object(a.jsx)(xe.a,{onClose:O,className:l.dialog,open:o,children:Object(a.jsx)("form",{onSubmit:function(t){var r;t.preventDefault(),console.log("id",i),j&&h&&i?(e.card?c((r={front:j,back:h,cardgroupid:i,id:e.card.id},function(){var e=Object(T.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("carddd",r),N.a.post("/api/editflashcard",{front:r.front,back:r.back,id:r.id},{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(e){if(console.log("returned"),console.log(e.data),e.data.error)throw console.log("error"),new Error(e.data.error);var a=e.data;t({type:ee,payload:r}),t({type:Q,payload:a}),t({type:L,payload:{severity:"success",text:"successfully changed card"}})})).catch((function(e){console.log("This is an error yes plz"),console.log(e.toString());var r={severity:"error",text:e.toString()};t({type:L,payload:r})})),console.log("async call up in hier",r);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())):c(Ve({front:j,back:h,cardgroupid:i})),O()):(alert("fill inn all fields"),console.log(j,h,i))},style:{margin:"40px"},children:Object(a.jsxs)(de.a,{container:!0,spacing:2,children:[Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h5",children:"Edit a flashcard "})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{onChange:function(e){return b(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",color:"secondary",label:"Front",value:j,multiline:!0,rows:4})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{onChange:function(e){return f(e.target.value)},id:"asd",label:"Back",color:"secondary",multiline:!0,rows:4,defaultValue:"",value:h,fullWidth:!0,required:!0,variant:"outlined"})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:j&&h?"green":"grey",color:"white"},children:e.card?"edit":"submit"})})]})})})},tt=function(e){var t=Object(I.b)(),r=Object(n.useState)({}),o=Object(s.a)(r,2),c=o[0],l=o[1],i=Object(n.useState)(!1),d=Object(s.a)(i,2),u=d[0],j=d[1],b=Object(I.c)((function(e){return e.loadingReducer.loading})),g=function(e){t(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("del,",e),t.next=3,N.a.delete("/api/deleteflashcard/"+e.id,{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(t){if(console.log(t.data),t.data.error)throw new Error(t.data.error);r({type:L,payload:{severity:"success",text:"successfully deleted card"}}),r({type:ee,payload:e})})).catch((function(t){var a={severity:"error",text:t.toString()+" when attemting to delete card"};r({type:L,payload:a}),r({type:te,payload:e})}));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e))},p=function(e){console.log("edit",e),l(e),j(!0)};console.log("car1ds",e.cards);var h=[];return e.cards.length&&e.cards.map((function(e,t){return h[t]=Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(Ye.a,{style:{padding:"10px",margin:"5px"},children:Object(a.jsxs)(de.a,{container:!0,spacing:0,children:[Object(a.jsxs)(de.a,{item:!0,xs:11,children:[Object(a.jsx)(S.a,{variant:"subtitle2",children:"Front:"}),Object(a.jsx)(S.a,{variant:"caption",children:e.front}),Object(a.jsx)(S.a,{variant:"subtitle2",children:"Back:"}),Object(a.jsx)(S.a,{variant:"caption",children:e.back})]}),Object(a.jsxs)(de.a,{item:!0,xs:1,style:{padding:"auto"},children:[Object(a.jsx)(Je.a,{onClick:function(){return p(e)},children:Object(a.jsx)(Ze.a,{style:{fontSize:"20px"}})}),Object(a.jsx)(Je.a,{onClick:function(){return g(e)},children:Object(a.jsx)(Qe.a,{style:{fontSize:"20px"}})})]})]})},e.id)})})),b?Object(a.jsx)(he,{}):Object(a.jsxs)("div",{children:[c?Object(a.jsx)(et,{open:u,onClose:function(e){j(!1)},cardgroupId:1,card:c}):Object(a.jsx)("div",{children:" "}),h.length?Object(a.jsx)(de.a,{container:!0,spacing:0,children:h}):Object(a.jsxs)("div",{style:{color:"grey",marginTop:"150px"},children:[Object(a.jsx)(S.a,{variant:"h5",children:"No cards"}),Object(a.jsxs)(S.a,{variant:"body1",children:["Add cards using the ",Object(a.jsx)("i",{children:"Add Flashcard"})," button"]})]})]})},rt=function(e){var t=e.onClose,r=e.selectedValue,n=e.open,o=e.card;return Object(a.jsx)(xe.a,{onClose:function(){t(r)},"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsx)(ae.a,{style:{width:"400px",height:"auto",margin:0},children:Object(a.jsx)(tt,{cards:[o]})})})},at=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.cardReducer.cards})),r=Object(n.useState)(!1),o=Object(s.a)(r,2),c=o[0],l=o[1],i=Object(n.useState)({}),d=Object(s.a)(i,2),u=d[0],j=d[1],b=Object(n.useState)(0),g=Object(s.a)(b,2),p=g[0],h=g[1];Object(n.useEffect)((function(){e(qe(p)),console.log("status")}),[e,p]),console.log("cards"),console.log(t);var f=t.map((function(e){return{id:e.id,name:e.user.name,username:e.user.username,front:e.front,back:e.back}}));return console.log("cgid",p),Object(a.jsxs)(oe,{children:[Object(a.jsx)(rt,{open:c,onClose:function(){return l(!1)},card:u}),Object(a.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(a.jsx)(He,{onChange:h}),Object(a.jsx)(S.a,{variant:"subtitle2",style:{marginTop:"20px"}})]}),Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(Pe.a,{onCellClick:function(e){return function(e){console.log("print",e.row),j(e.row),l(!0)}(e)},rows:f,columns:[{field:"username",headerName:"Username",width:130},{field:"front",headerName:"Card Front",width:130},{field:"back",headerName:"Card Back",width:130}],pageSize:5})})]})},nt=function(){var e=Object(I.b)();return Object(n.useEffect)((function(){e(function(){var e=Object(T.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.a.get("/api/login/callback",{withCredentials:!0}).then((function(e){if(e.data.error)throw new Error(e.data.error);var r=e.data.user_token,a=e.data.refresh_token;console.log("action, usertoken",r),console.log("action, refresh",a),localStorage.setItem("user_token",r),localStorage.setItem("refresh_token",a),t({type:z,payload:{loggedIn:!0}})})).catch((function(e){console.log("Error in signInCallback",e);var r={severity:"error",text:e.toString()};t({type:L,payload:r})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.jsx)(d.a,{to:{pathname:"/"}})},ot=r(268),ct=Object(i.a)((function(e){return{dialog:{"& .MuiDialog-paperScrollPaper":{maxHeight:"100vh"}}}})),lt=function(e){var t=e.onClose,r=e.selectedValue,o=e.open,c=Object(I.b)(),l=ct(),i=e.cardgroupId,d=Object(n.useState)(""),u=Object(s.a)(d,2),j=u[0],b=u[1],g=Object(n.useState)(""),p=Object(s.a)(g,2),h=p[0],f=p[1],O=function(){t(r)};return Object(a.jsx)(xe.a,{onClose:O,className:l.dialog,open:o,children:Object(a.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),console.log("id",i),j&&h&&i){try{c(Ve({front:j,back:h,cardgroupid:i}))}catch(t){}b(""),f(""),O()}else alert("fill inn all fields"),console.log(j,h,i)},style:{margin:"40px"},children:Object(a.jsxs)(de.a,{container:!0,spacing:2,children:[Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(S.a,{variant:"h5",children:"Create a flashcard. This can be edited later "})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{onChange:function(e){return b(e.target.value)},fullWidth:!0,required:!0,variant:"outlined",color:"secondary",label:"Front",value:j,multiline:!0,rows:4})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(me.a,{onChange:function(e){return f(e.target.value)},id:"asd",label:"Back",color:"secondary",multiline:!0,rows:4,defaultValue:"",value:h,fullWidth:!0,required:!0,variant:"outlined"})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(A.a,{type:"submit",fullWidth:!0,style:{backgroundColor:j&&h?"green":"grey",color:"white"},children:"Submit"})})]})})})},st=Object(i.a)((function(e){return{addButton:{backgroundColor:e.palette.button.success.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.success.dark}},delButton:{backgroundColor:e.palette.button.error.main,color:"white",border:"none",align:"center","&:hover":{background:e.palette.button.error.dark}},progressBar:{"& .MuiLinearProgress-barColorPrimary":{backgroundColor:e.palette.button.success.main}}}})),it=function(e){console.log("prop"),console.log(e.match.params);var t=Object(n.useState)(!1),r=Object(s.a)(t,2),o=r[0],c=r[1],l=st(),i=Object(I.c)((function(e){return e.authReducer.isAdmin})),u=Object(I.c)((function(e){return e.cardReducer.cards})),j=Object(I.c)((function(e){return e.cardgroupReducer.cardgroups[0]})),b=Object(I.c)((function(e){return e.authReducer.loggedInUser})),g=Object(n.useState)(!1),p=Object(s.a)(g,2),h=p[0],f=p[1],O=Object(I.b)(),x=Math.round(u.length/j.numberOfCardsDue*100),m=Object(I.c)((function(e){return e.loadingReducer.loading}));console.log("cardgr.:"),console.log(j),Object(n.useEffect)((function(){var t,r,a;console.log("stuff and things"),console.log(j),console.log(b),O((t=e.match.params.id,r=b.id,function(){var e=Object(T.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:U,payload:!0}),console.log("userid",r),console.log("cardgroupid",t),e.next=5,N.a.get("/api/cardgroupuserflashcards/"+t+"/"+r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);var t=e.data;console.log("lmlmlml"),console.log(t),a({type:$,payload:t})})).catch((function(e){return console.log(e)}));case 5:a({type:U,payload:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),O((a=e.match.params.id,function(){var e=Object(T.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:U,payload:!0}),e.next=3,N.a.get("/api/cardgroup/"+a).then((function(e){if(console.log("res,",e),e.data.error)throw console.log("error"),new Error(e.data.error);var r=[e.data];console.log("cardgroup found"),console.log(r),t({type:Y,payload:r})})).catch((function(e){var r={severity:"error",text:e.toString()};t({type:L,payload:r})}));case 3:t({type:U,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[O,e.match.params.id]);var y=j.dueDate,v=new Date(y.year,y.month-1,y.date,y.hour,y.minute);return console.log("aa",v),o?Object(a.jsx)(d.a,{to:{pathname:"/"}}):m?Object(a.jsx)(oe,{children:Object(a.jsx)(he,{})}):Object(a.jsxs)(oe,{children:[Object(a.jsx)(lt,{open:h,onClose:function(e){f(!1)},cardgroupId:e.match.params.id}),Object(a.jsxs)(de.a,{container:!0,spacing:6,children:[Object(a.jsxs)(de.a,{item:!0,xs:8,children:[Object(a.jsx)(S.a,{variant:"h4",children:j.title}),Object(a.jsxs)(S.a,{variant:"body2",children:[j.numberOfCardsDue," cards are due"," "+v.toString()]}),Object(a.jsx)("div",{style:{marginTop:"40px"},children:Object(a.jsx)(tt,{cards:u})})]}),Object(a.jsxs)(de.a,{item:!0,xs:4,children:[Object(a.jsx)(A.a,{fullWidth:!0,style:{height:"80px"},className:l.addButton,variant:"outlined",onClick:function(){f(!0)},children:"+ Add Flashcard"}),Object(a.jsxs)(de.a,{container:!0,style:{margin:"30px 0",border:"0px solid black"},children:[Object(a.jsxs)(de.a,{item:!0,xs:8,children:[Object(a.jsx)(S.a,{variant:"body1",children:"You've created"}),Object(a.jsxs)(S.a,{variant:"body1",children:[u.length," of ",j.numberOfCardsDue]})]}),Object(a.jsx)(de.a,{item:!0,xs:4,children:Object(a.jsxs)(S.a,{variant:"h4",children:[x,"%"]})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)(ot.a,{className:l.progressBar,variant:"determinate",value:x})})]}),i?Object(a.jsx)(A.a,{fullWidth:!0,style:{height:"80px"},className:l.delButton,variant:"outlined",onClick:function(){window.confirm("Are you sure you want to delete cardgroup with all cards?")&&(O(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("and action"),console.log(e.id),t.next=4,N.a.delete("/api/deletegroup/"+e.id,{headers:{Authorization:"Bearer "+localStorage.getItem("user_token")}}).then((function(t){if(console.log("to be deleted"),t.data.error)throw console.log("error"),new Error(t.data.error);var a={severity:"success",text:"successfully deleted cardgroup: "+e.title};r({type:L,payload:a}),r({type:J,payload:e})})).catch((function(e){var t={severity:"error",text:e.toString()};r({type:L,payload:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(j)),c(!0))},children:"Delete cardgroup and all cards"}):Object(a.jsx)("div",{})]}),Object(a.jsx)(de.a,{item:!0,xs:7})]})]})},dt=function(){var e=Object(I.c)((function(e){return e.authReducer.loggedInUser})),t=Object(I.c)((function(e){return e.authReducer.isAdmin}));return Object(a.jsxs)(oe,{children:[t?Object(a.jsx)(S.a,{variant:"h3",children:"Admin profile"}):Object(a.jsx)(S.a,{variant:"h3",children:"User profile"}),e?Object(a.jsxs)("div",{children:[" ",Object(a.jsxs)("h2",{children:["You are logged in, ",e.name]}),Object(a.jsx)("span",{style:{color:"grey"},children:"username: "}),Object(a.jsx)("span",{children:e.username})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"email: "}),Object(a.jsx)("span",{children:e.email})," "]}):Object(a.jsx)("h1",{children:" Not logged in  "})]})},ut=function(e){var t=e.onClose,r=e.selectedValue,n=e.open,o=e.user,c=Object(I.b)(),l=function(){t(r)},s=function(){c(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:U,payload:!0}),N.a.get("/api/addadmin/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:M,payload:t})})).catch((function(e){return console.log(e)})),r({type:U,payload:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(o)),l()},i=function(){c(function(e){return function(){var t=Object(T.a)(_.a.mark((function t(r,a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:U,payload:!0}),N.a.get("/api/removeadmin/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var t=e.data;r({type:M,payload:t})})).catch((function(e){return console.log(e)})),r({type:U,payload:!1});case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(o)),l()};return Object(a.jsx)(xe.a,{onClose:l,"aria-labelledby":"simple-dialog-title",open:n,children:Object(a.jsxs)("div",{style:{padding:"30px",width:"500px"},children:[Object(a.jsxs)("h2",{children:["User: ",o.name]}),Object(a.jsx)("span",{style:{color:"grey"},children:"username: "}),Object(a.jsx)("span",{children:o.username})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"email: "}),Object(a.jsx)("span",{children:o.email})," ",Object(a.jsx)("br",{}),Object(a.jsx)("span",{style:{color:"grey"},children:"role: "}),Object(a.jsx)("span",{children:o.role})," ",Object(a.jsx)("br",{}),Object(a.jsx)("div",{style:{textAlign:"center",paddingTop:"50px"},children:"Admin"==o.role?Object(a.jsx)(A.a,{onClick:function(){return i()},variant:"outlined",children:"Remove admin"}):Object(a.jsx)(A.a,{onClick:function(){return s()},variant:"outlined",children:"Make admin"})})]})})},jt=function(){var e=Object(n.useState)("all"),t=Object(s.a)(e,2),r=t[0],o=t[1],c=Object(I.b)(),l=Object(I.c)((function(e){return e.userReducer.users})),i=Object(n.useState)(!1),d=Object(s.a)(i,2),u=d[0],j=d[1],b=Object(n.useState)({}),g=Object(s.a)(b,2),p=g[0],h=g[1],f=Object(n.useState)(""),O=Object(s.a)(f,2),x=O[0],m=O[1],v=function(e){"all"===e?(console.log("all da"),c(function(){var e=Object(T.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.a.get("/api/users/all",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("res data alll",e.data),t({type:F,payload:e.data})})).catch((function(e){console.log("Error in get users",e);var r={severity:"error",text:e.toString()};t({type:L,payload:r})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):"User"===e?c(We("User")):"Admin"===e&&(console.log("aadd"),c(We("Admin")))};Object(n.useEffect)((function(){v(r)}),[c,r]);var w=l,k=function(e){x?c(function(e,t){return function(){var r=Object(T.a)(_.a.mark((function r(a){return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:N.a.get("/api/users/search/role="+e+"/searchphrase="+t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("res data",e.data),a({type:F,payload:e.data})})).catch((function(e){console.log("Error in get users",e);var t={severity:"error",text:e.toString()};a({type:L,payload:t})}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(r,x)):v(r)};return Object(a.jsxs)(oe,{children:[Object(a.jsx)(ut,{open:u,onClose:function(){return j(!1)},user:p}),Object(a.jsxs)(de.a,{container:!0,spacing:1,children:[Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsxs)(Fe.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Me.a,{id:"demo-simple-select-label",children:"Filter"}),Object(a.jsxs)(Ge.a,{required:!0,color:"secondary",value:r,onChange:function(e){return function(e){m(""),o(e.target.value)}(e)},label:"show",children:[Object(a.jsx)(y.a,{value:"all",children:"All users"}),Object(a.jsx)(y.a,{value:"Admin",children:"Admins"}),Object(a.jsx)(y.a,{value:"User",children:"Users"})]})]})}),Object(a.jsx)(de.a,{item:!0,xs:6,children:Object(a.jsx)(me.a,{id:"search",label:"Search username",color:"secondary",defaultValue:"",fullWidth:!0,onKeyPress:function(e){"Enter"===e.key&&k()},onChange:function(e){return m(e.target.value)},value:x,variant:"outlined",InputProps:{endAdornment:Object(a.jsx)(Je.a,{onClick:k,children:Object(a.jsx)(Pe.b,{})})}})}),Object(a.jsx)(de.a,{item:!0,xs:12,children:Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(Pe.a,{onCellClick:function(e){return function(e){console.log("print",e.row),h(e.row),j(!0)}(e)},rows:w,columns:[{field:"id",headerName:"id",width:70},{field:"username",headerName:"username",width:130},{field:"name",headerName:"name",width:130},{field:"email",headerName:"email",width:130},{field:"role",headerName:"role",width:130}],pageSize:5})})})]})]})},bt=r(278),gt=r(269),pt=Object(i.a)((function(e){return{navlink:{color:e.palette.textColor,textDecoration:"none"},button:{width:"200px",height:"50px"}}})),ht=function(e){var t=pt(),r=o.a.useState(1),n=Object(s.a)(r,2),c=n[0],l=n[1];return Object(a.jsxs)(oe,{children:[Object(a.jsx)(S.a,{variant:"h4",style:{flexGrow:0},children:"Amin Page"}),Object(a.jsx)(C.a,{style:{padding:0},children:Object(a.jsxs)(bt.a,{fullWidth:!0,value:c,exclusive:!0,onChange:function(e,t){l(t)},"aria-label":"text alignment",children:[Object(a.jsx)(gt.a,{component:u.b,value:1,to:"/adminpage/users",className:t.button,variant:"outlined",children:" Users "}),Object(a.jsx)(gt.a,{component:u.b,value:2,to:"/adminpage/deliverystatus",className:t.button,variant:"outlined",children:" Delivery status "}),Object(a.jsx)(gt.a,{component:u.b,value:3,to:"/adminpage/allcards",className:t.button,variant:"outlined",children:" All Cards "})]})})]})},ft=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(d.a,{to:"/adminpage/users"})})},Ot=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.userReducer.status})),r=Object(n.useState)(0),o=Object(s.a)(r,2),c=o[0],l=o[1];Object(n.useEffect)((function(){var r;e((r=c,function(){var e=Object(T.a)(_.a.mark((function e(t,a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:U,payload:!0}),r||t({type:G,payload:[]}),N.a.get("/api/deliverystatus/"+r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw console.log("error"),new Error(e.data.error);var r=e.data;console.log("mah status"),console.log(r),t({type:G,payload:r})})).catch((function(e){return console.log(e)})),t({type:U,payload:!1});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())),console.log("status"),console.log(t)}),[e,c]),console.log("usars");var i=t.map((function(e){return{id:e.user.id,username:e.user.username,delivered:e.delivered,toDeliver:e.cardgroup.numberOfCardsDue,complete:e.delivered==e.cardgroup.numberOfCardsDue}}));return console.log("cgid",c),Object(a.jsxs)(oe,{children:[Object(a.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(a.jsx)(He,{onChange:l}),Object(a.jsx)(S.a,{variant:"subtitle2",style:{marginTop:"20px"},children:t[0]?"Due: "+function(e){var t=new Date(e.year,e.month-1,e.date,e.hour,e.minute);return console.log("aa",t),t.toString()}(t[0].cardgroup.dueDate):"Due:"})]}),Object(a.jsx)("div",{style:{height:400,width:"100%"},children:Object(a.jsx)(Pe.a,{rows:i,columns:[{field:"username",headerName:"Username",width:130},{field:"delivered",headerName:"Delivered",type:"number",width:130},{field:"toDeliver",headerName:"To Deliver",type:"number",width:130},{field:"complete",headerName:"Complete",type:"number",width:130}],pageSize:5})})]})},xt=Object(i.a)((function(e){return{}})),mt=function(){var e=xt(),t=Object(I.c)((function(e){return e.authReducer.loggedIn})),r=Object(I.c)((function(e){return e.authReducer.isAdmin})),c=Object(I.b)();return Object(n.useEffect)((function(){c(function(){var e=Object(T.a)(_.a.mark((function e(t,r){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=localStorage.getItem("user_token"),n=localStorage.getItem("refresh_token"),console.log("user_token?",Boolean(a)),console.log("refresh_token?",Boolean(n)),a&&n?(console.log("found both tokens"),N.a.get("/api/getcurrentuser",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("user_token"))}}).then((function(e){if(e.data.error)throw new Error(e.data.error);console.log("found user?",e.data),console.log("true? ","Admin"===e.data.role);var r={loggedIn:!0,loggedInUser:e.data,isAdmin:"Admin"==e.data.role};t({type:P,payload:r})})).catch((function(e){console.log("error..",e),t({type:P,payload:{loading:!1,loggedInUser:{}}})}))):(console.log("no user logged in"),t({type:P,payload:{loggedIn:!1,loggedInUser:{},loading:!1}}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),console.log("is logged",t),console.log("is admin",r)}),[t,c]),Object(a.jsx)("div",{className:e.pages,children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{path:"/",exact:!0,component:t?De:Ue}),Object(a.jsx)(d.b,{path:"/loginfunc",exact:!0,component:nt}),Object(a.jsx)(d.b,{path:"/cardgroup/:id",exact:!0,component:it}),t?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(d.b,{path:"/userprofile/:username",exact:!0,component:dt}),r?Object(a.jsx)(o.a.Fragment,{children:Object(a.jsx)(d.b,{path:"/adminpage",render:function(e){var t=e.match.url;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ht,{}),Object(a.jsx)(d.b,{path:"".concat(t,"/"),component:ft,exact:!0}),Object(a.jsx)(d.b,{path:"".concat(t,"/users"),component:jt}),Object(a.jsx)(d.b,{path:"".concat(t,"/deliverystatus"),component:Ot}),Object(a.jsx)(d.b,{path:"".concat(t,"/allcards"),component:at})]})}})}):Object(a.jsx)(o.a.Fragment,{})]}):Object(a.jsx)(u.a,{to:{pathname:"/"}})]})})},yt=r(270),vt=r(266),wt=r(78),kt=r(118),Ct=r.n(kt),St=r(100),At=Object(wt.a)({palette:{type:"dark",textColor:"#fff",primary:{main:"#171717"},secondary:{main:"#fff"},button:{main:Ct.a[500],success:{main:"#078900",dark:"#0ab500"},error:{main:"#000"}},hover:"f0f0f0"},values:{siteSideMargin:"25%",siteTopMargin:"75px"}}),Et=Object(wt.a)({root:{},palette:{primary:{main:"#00509e"},secondary:{main:St.a[500]},textColor:"#000",button:{main:Ct.a[500],success:{main:"#078900",dark:"#0ab500"},error:{main:"#931A00",dark:"#60190B"}},hover:"f0f0f0"},values:{siteSideMargin:"25%",siteTopMargin:"75px"}}),Rt=r(273),It=r(276),Dt=function(){var e=Object(I.c)((function(e){return e.alertReducer.severity})),t=Object(I.c)((function(e){return e.alertReducer.text})),r=o.a.useState(!1),c=Object(s.a)(r,2),l=c[0],i=c[1];Object(n.useEffect)((function(){t&&i(!0)}),[t]);var d=function(e,t){"clickaway"!==t&&i(!1)};return Object(a.jsx)(It.a,{open:l,autoHideDuration:6e3,onClose:d,children:Object(a.jsx)(Rt.a,{onClose:d,severity:e,children:t})})},_t=function(){var e=o.a.useState(!1),t=Object(s.a)(e,2),r=t[0],c=t[1];Object(n.useEffect)((function(){var e=sessionStorage.getItem("dark-mode");console.log("init darkmode",e),e?"true"===e&&c(!0):sessionStorage.setItem("dark-mode","false")}),[]);return Object(a.jsxs)(vt.a,{theme:r?At:Et,children:[Object(a.jsx)(yt.a,{}),Object(a.jsxs)(u.a,{children:[Object(a.jsx)(ie,{loggedin:!0,setDarkMode:function(){var e=sessionStorage.getItem("dark-mode");console.log(e),"true"===e?(c(!1),sessionStorage.setItem("dark-mode","false")):"false"===e&&(c(!0),sessionStorage.setItem("dark-mode","true"))}}),Object(a.jsx)(Dt,{}),Object(a.jsx)(mt,{})]})]})},Tt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,280)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),o(e),c(e)}))},Bt=r(70),Nt=r(28),Ut={cards:[]},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return console.log("created card",t.payload),console.log(e),console.log(Object(Ae.a)(Object(Ae.a)({},e),{},{cards:[].concat(Object(Nt.a)(e.cards),[t.payload])})),Object(Ae.a)(Object(Ae.a)({},e),{},{cards:[].concat(Object(Nt.a)(e.cards),[t.payload])});case X:return Object(Ae.a)({},e);case Z:return console.log("got card",t.payload),Object(Ae.a)(Object(Ae.a)({},e),{},{cards:t.payload});case $:return console.log("got cards",t.payload),console.log(Object(Ae.a)(Object(Ae.a)({},e),{},{cards:t.payload})),Object(Ae.a)(Object(Ae.a)({},e),{},{cards:t.payload});case ee:return console.log("deleting dem cards"),console.log(e.cards),console.log(e.cards.filter((function(e){return e.id!==t.payload.id}))),Object(Ae.a)(Object(Ae.a)({},e),{},{cards:e.cards.filter((function(e){return e.id!==t.payload.id}))});case te:default:return e}},zt={cardgroups:[]},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return console.log("created cardgroup",t.payload),console.log(e),console.log(Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:[].concat(Object(Nt.a)(e.cardgroups),[t.payload])})),Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:[].concat(Object(Nt.a)(e.cardgroups),[t.payload])});case q:return e;case H:return console.log("got cardgroups",t.payload),console.log(Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:t.payload})),Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:t.payload});case Y:return console.log("cardgroup",t.payload),Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:t.payload});case J:return console.log("deleting cardgroup"),console.log(e.cardgroups),console.log(e.cardgroups.filter((function(e){return e.id!==t.payload.id}))),Object(Ae.a)(Object(Ae.a)({},e),{},{cardgroups:e.cardgroups.filter((function(e){return e.id!==t.payload.id}))});case K:default:return e}},Pt={severity:"",text:""},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return console.log("Alert",t),{severity:t.payload.severity,text:t.payload.text};default:return console.log("default alert"),e}},Mt=Object(Bt.c)({authReducer:Re,cardReducer:Lt,cardgroupReducer:Wt,alertReducer:Ft,loadingReducer:ge,userReducer:ze}),Gt=r(154),Vt=Object(Bt.d)(Mt,Object(Bt.a)(Gt.a));l.a.render(Object(a.jsx)(I.a,{store:Vt,children:Object(a.jsx)(_t,{})}),document.getElementById("root")),Tt()}},[[217,1,2]]]);
//# sourceMappingURL=main.a0c99c85.chunk.js.map